---
- hosts: all
  become: yes
  tasks:

  - name: Adding ansible.xyzcorp.com to the hosts file.
    lineinfile:
      path: /etc/hosts
      line: 169.168.0.1 ansible.xyzcorp.com

  - name: Install elinks.
    package:
      name: elinks
      state: latest

  - name: Create audit user.
    user:
      name: audit
      state: present

  - name: Update motd.
    copy:
      src: motd
      dest: /etc/motd

  - name: Update issue.
    copy: 
      src: issue
      dest: /etc/issue


- hosts: network
  become: yes
  tasks:

  - name: Install netcat
    package:
      name: nmap-ncat
      state: latest

  - name: Create network user. (xyzcorp_network)
    user:
      name: xyzcorp_network
      state: present
     
- hosts: sysadmin 
  become: yes
  tasks: 

  - name: Copy tarball
    copy: 
      src: scripts.tgz
      dest: /mnt/storage
